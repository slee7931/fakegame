<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>관리자 통제실</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body {
            background: #121212;
            color: white;
            font-family: sans-serif;
            text-align: center;
            padding: 20px;
        }

        .box {
            padding: 20px;
            background: #1e1e1e;
            border-radius: 10px;
            margin: 10px;
            display: inline-block;
            width: 220px;
            border-top: 5px solid #333;
        }

        .btn {
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            cursor: pointer;
            color: white;
            font-weight: bold;
            border: none;
            width: 200px;
        }

        #status {
            color: #55efc4;
            font-weight: bold;
            margin-top: 20px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <h1>바카라 통제 패널</h1>
    <h2 id="timer" style="color:#ff4757; font-size:3em;">7</h2>

    <div class="box" style="border-color:#0984e3;">P BET: <span id="p-amt">0</span></div>
    <div class="box" style="border-color:#d63031;">B BET: <span id="b-amt">0</span></div>

    <div style="margin-top:30px; background:#1e1e1e; padding:30px; border-radius:20px;">
        <h3>승부 예약 조작</h3>
        <p style="color:#aaa">베팅 시간이 끝난 후 예약된 결과가 나옵니다.</p>
        <button class="btn" style="background:#0984e3;" onclick="force('플레이어')">플레이어 승리 예약</button>
        <button class="btn" style="background:#d63031;" onclick="force('뱅커')">뱅커 승리 예약</button>
        <button class="btn" style="background:#27ae60;" onclick="force('타이')">무승부(타이) 예약</button>
        <div id="status">현재 상태: 정상 랜덤</div>
    </div>

    <script>
        const socket = io();
        socket.on('timer_update', t => document.getElementById('timer').innerText = t);
        socket.on('update_admin_stats', s => {
        document.getElementById('p-amt').innerText = s['플레이어'].amount.toLocaleString();
        document.getElementById('b-amt').innerText = s['뱅커'].amount.toLocaleString();
        if (s['플레이어'].amount === 0) document.getElementById('status').innerText = "현재 상태: 정상 랜덤";
        });
        function force(target) {
        socket.emit('admin_force_win', target);
        document.getElementById('status').innerText = `현재 상태: ${target} 승리 예약됨`;
        }
    </script>
</body>
</html>
